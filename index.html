<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>W3C Dash</title>
  <link rel="stylesheet" href="w3c-dash.css" />
  <link rel="icon" href="w3c-dash.svg" type="image/svg+xml">
</head>

<body>
  <div id="main">
    <div id="titleRow" style="display: flex; align-items: center; justify-content: space-between; margin-top: 0.5em;">

      <!-- 左側：ロゴ + タイトル + サブタイトル -->
      <div style="display: flex; align-items: center; gap: 1em;">
        <img src="w3c-dash.svg" width="32px" height="32px" alt="W3C Dash Logo" style="margin-left: 10px;">

        <!-- タイトル + サブタイトル（横並びに変更） -->
        <div style="display: flex; align-items: baseline; gap: 0.5em;">
          <h1 id="title" style="font-size:1.5em; font-weight:700; margin: 0;">
            W3C Dash
          </h1>
          <span style="font-size: 0.85em; color: #888; font-weight: 400; letter-spacing: 0.01em;">
            - a dashboard of <a href="https://www.w3.org" target="_blank"
              style="color: #0969da; text-decoration: underline;">W3C</a> statistics -
          </span>
        </div>
      </div>

      <!-- 右側：日付 -->
      <span id="dateStr" style="font-size: 0.8em; color: #666; white-space: nowrap;"></span>
    </div>


    <div id="summary">
      <div id="status"></div>
      <select id="sortBy" style="display: none;">
        <option value="name">Group Name ↑</option>
        <option value="invitedExperts">Invited Experts ↓</option>
        <option value="allParticipants">All Participants ↓</option>
        <option value="memberParticipants">Member Participants ↓</option>
        <option value="members">Members ↓</option>
        <option value="staffs">Staffs ↓</option>
        <option value="individuals">Individuals ↓</option>
      </select>
      <!-- Summary Row (HTML構造をJSから分離) -->
      <section id="summarySection"
        style="border: 1px solid #ddd; border-radius: 4px; padding: 10px; background: #f8f9fa; margin-bottom: 1.5px; display: flex; flex-direction: column; gap: 2px;">
        <div
          style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 4px; width: 100%;">
          <span style="font-size: 1.15em; font-weight: 700;">Summary <span id="dateStr"
              style="font-size:0.95em; font-weight:400; color:#666; margin-left:8px;"></span></span>
          <button id="toggleonlyGroupParticipations" type="button"
            style="padding: 0 3px; height: 12px; font-size: 0.65em; border: 1px solid #bbb; border-radius: 3px; background: #f3f3f3; cursor: pointer; display: flex; align-items: center; gap: 2px; min-width: 0; box-sizing: border-box; margin-left: auto;">
            <span id="toggleonlyGroupParticipationsCheck"
              style="display: inline-block; width: 8px; height: 8px; border: 1px solid #bbb; border-radius: 2px; background: #fff; text-align: center; font-size: 0.7em; line-height: 7px; color: #0969da; transition: background 0.2s; margin-right: 2px;">
            </span>
            <span style="font-size: 1.15em; color: #222; font-weight: 400; user-select: none;">Only Group
              Participations</span>
          </button>
        </div>
        <div
          style="display: flex; font-size: 0.82em; gap: 7px; flex-wrap: wrap; line-height: 1.18; row-gap: 2px; margin-left: 10px;">
          <span>Groups (G): <span id="summaryGroups" class="summary-count"></span></span>
          <span>Members (M): <span class="clickable summary-count" id="summaryMembers"
              data-summary-type="members"></span></span>
          <span>Member Participants (MP): <span class="clickable summary-count" id="summaryMemberParticipants"
              data-summary-type="memberParticipants"></span></span>
          <span>Invited Experts (IE): <span class="clickable summary-count" id="summaryInvitedExperts"
              data-summary-type="invitedExperts"></span></span>
          <span>Staffs (S): <span class="clickable summary-count" id="summaryStaffs"
              data-summary-type="staffs"></span></span>
          <span>Individuals (Ind): <span class="clickable summary-count" id="summaryIndividuals"
              data-summary-type="individuals"></span></span>
          <span>Participants (P): <span class="clickable summary-count" id="summaryAllParticipants"
              data-summary-type="allParticipants"></span></span>
          <span style="font-size: 0.9em; color: #666;">Note: P=MP+IE+S+Ind</span>
        </div>
      </section>
      <div id="summary-stats"></div>
    </div>
    <!-- グループ種別フィルタバーをgroupsDivの外側（上）に配置 -->
    <div class="filter-bar">
      <div
        style="display: flex; flex-direction: column; gap: 1px; padding: 10px; background: #f6f8fa; border-bottom: 1px solid #ddd;">
        <div style="font-size: 1.15em; font-weight: 600; margin-bottom: 5px;">Groups</div>
        <div id="groupTypeFilter"
          style="font-size: 0.95em; display: flex; gap: 1.5px; flex-wrap: wrap; margin-left: 10px;">
          <button class="filter-btn" data-type="wg">Working Groups</button>
          <button class="filter-btn" data-type="ig">Interest Groups</button>
          <button class="filter-btn" data-type="cg">Community Groups</button>
          <button class="filter-btn" data-type="tf">Task Forces</button>
          <button class="filter-btn" data-type="other">Other Groups</button>
          <button class="filter-btn" data-type="all">All Groups</button>
        </div>
      </div>
    </div>
    <div id="groups"></div>
    <div
      style="padding: 0.5em; text-align: center; color: #aaa; font-size: 0.7em; border-top: 1px solid #eee; background: #fafbfc;">
      The source code of this web application is maintained at:
      <a href="https://github.com/igarashi50/w3c-dash" target="_blank">https://github.com/igarashi50/w3c-dash</a>
    </div>
  </div>

  <div id="popup">
    <div id="popupHeader">
      <div id="popupTitle"></div>
      <div id="popupClose">[Close]</div>
    </div>
    <div id="popupBody">
      <div id="popupContent"></div>
    </div>
  </div>

  <div id="popupOverlay" class="popup-overlay"></div>

  <div id="participationsPopup">
    <div id="participationsPopupHeader">
      <div id="participationsPopupTitle"></div>
      <div id="participationsPopupClose">[Close]</div>
    </div>
    <div id="participationsFilter"
      style="padding: 8px 12px; background: #f6f8fa; border-bottom: 1px solid #ddd; display: flex; flex-direction: column; gap: 8px;">
      <div style="display: flex; align-items: center; justify-content: space-between; width: 100%;">
        <span style="font-size: 1.15em; font-weight: 700;">Participations</span>
        <div>
          <button id="toggleonlyGroupParticipationsPopup" type="button"
            style="padding: 0 3px; height: 12px; font-size: 0.65em; border: 1px solid #bbb; border-radius: 3px; background: #f3f3f3; cursor: pointer; display: flex; align-items: center; gap: 2px; min-width: 0; box-sizing: border-box; margin-left: auto;">
            <span id="toggleonlyGroupParticipationsPopupCheck"
              style="display: inline-block; width: 8px; height: 8px; border: 1px solid #bbb; border-radius: 2px; background: #fff; text-align: center; font-size: 0.7em; line-height: 7px; color: #0969da; transition: background 0.2s; margin-right: 2px;">
            </span>
            <span style="font-size: 1.15em; color: #222; font-weight: 400; user-select: none;">Only Group
              Participations</span>
          </button>
        </div>
      </div>
      <div id="participationsButtonContainer" style="display: flex; gap: 4px; flex-wrap: wrap;">
        <button class="filter-btn" data-filter="members">Members: <span class="filter-count"
            id="filterCountMembers"></span></button>
        <button class="filter-btn" data-filter="memberParticipants">Member participants: <span class="filter-count"
            id="filterCountMemberParticipants"></span></button>
        <button class="filter-btn" data-filter="invitedExperts">Invited Experts: <span class="filter-count"
            id="filterCountInvitedExperts"></span></button>
        <button class="filter-btn" data-filter="staffs">Staffs: <span class="filter-count"
            id="filterCountStaffs"></span></button>
        <button class="filter-btn" data-filter="individuals">Individuals: <span class="filter-count"
            id="filterCountIndividuals"></span></button>
        <button class="filter-btn" data-filter="allParticipants">All participants: <span class="filter-count"
            id="filterCountAllParticipants"></span></button>
      </div>
    </div>
    <div id="participationsPopupBody">
      <div id="membersList" class="pane">
        <h3>Affiliations</h3>
        <div id="membersListContent">
          <!-- members content will be added here -->
        </div>
      </div>
      <div id="participantsList" class="pane">
        <h3>Participants</h3>
        <div id="participantsListContent">
          <!-- participants content will be added here -->
        </div>
      </div>
      <div id="userDetail" class="pane">
        <h3>User Detail</h3>
        <div id="userDetailContent">
          <!-- user detail content will be added here -->
        </div>
      </div>
    </div>
  </div>

  <div id="participationsPopupOverlay" class="popup-overlay"></div>
  <script src="w3c-api.js"></script>
  <script src="w3c-dash.js"></script>
</body>

</html>